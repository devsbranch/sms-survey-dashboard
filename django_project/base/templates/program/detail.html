{% extends "layouts/base.html" %}
{% load humanize %}
{% load static %}

{% block title %}

{{ title|title }}

{% endblock %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}

<!-- PAGE content goes HERE -->
{% block content %} {% include 'includes/project-create-modal.html' %}
<!--  -->
{% include 'includes/project-update-modal.html' %}
<!--  -->
{% include 'includes/project-delete-modal.html' %}

<!-- Main dashboard container -->
<div id="dashboard-wrapper" class="dashboard-outer">
  <div class="dashboard-inner">
    <!-- Dashboard Wrapper -->
    <div class="dashboard-wrapper">
      <div id="main-dashboard" class="section-wrapper">
        <!-- Dashboard content -->
        <div id="basic-layout" class="dashboard-columns">
          <div class="projects-wrapper">
            <div class="profile-heading">
              {% if program.logo %}
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{{ program.logo.url }}"
              />
              {% else %}
              <!--  -->
              {% if program.name|lower == 'ppcr' %}
              <!--  -->
              data-demo-src="{% static 'assets/images/ppcr.png' %}">
              <!--  -->
              {% elif program.name|lower == 'tralard' %}
              <!--  -->
              data-demo-src="{% static 'assets/images/tralard.png' %}">
              <!--  -->
              {% endif %}
              <!--  -->
              {% endif %}
              <div>
                <h2 class="project-title">
                  Program Name: {{ program.name|upper }}
                </h2>
                <h4 class="project-tagline no-margin-bottom">
                  program landing page
                </h4>
              </div>
            </div>

            <div
              class="navigation-tabs layout-tabs overflow-tabs animated-tabs mt-20 mb-20"
            >
              <div class="tabs is-toggle is-fullwidth">
                <ul>
                  <li class="tab-link is-active" data-tab="my-teams">
                    <a>Projects</a>
                  </li>
                  <li class="tab-link" data-tab="my-projects">
                    <a>SubProjects</a>
                  </li>
                  <li class="tab-link" data-tab="my-tasks">
                    <a>Beneficiaries</a>
                  </li>
                </ul>
              </div>

              <!-- All Projects Display -->
              <div id="my-teams" class="navtab-content is-active">
                <!-- Projects Group -->
                <div class="projects-list-wrapper">
                  <div class="list-header">
                    <div class="list-title">
                      <span
                        >Showing All Projects Under {{ program.name|upper }}
                        <h4 class="project-tagline no-margin-bottom">
                          total count: {{ total_projects }}
                        </h4>
                      </span>
                      <div
                        class="add-button modal-trigger"
                        data-modal="project-form-modal"
                      >
                        <i class="material-icons">add</i>
                      </div>
                    </div>
                    <div class="list-filter">
                      <div class="control">
                        <input
                          class="input"
                          type="text"
                          placeholder="Filter Projects"
                        />
                        <div class="form-icon">
                          <i data-feather="filter"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="list-body">
                    <div class="columns is-multiline">
                      <!-- All Project Display -->

                      {% for project in projects %}

                      <!-- Team card -->
                      <div class="column is-4">
                        <div
                          class="flex-card light-bordered light-shadow team-card card-overflow"
                        >
                          <div class="header">
                            <a href="{{ project.get_absolute_url }}">
                              <h4 class="no-margin-bottom">
                                {{ project.name|title }}
                              </h4>
                            </a>
                            <!-- Project card dropdown -->
                            <div
                              class="dropdown is-right dropdown-trigger styled-dropdown is-round"
                            >
                              <div class="button">
                                <i class="material-icons">more_vert</i>
                              </div>
                              <div
                                class="dropdown-menu is-text-bigger has-text-left"
                                role="menu"
                              >
                                <div class="dropdown-content">
                                  <a href="#" class="dropdown-item">
                                    <i class="sl sl-icon-people"></i>
                                    <span>
                                      <span>View sub project</span>
                                      <span>View details of sub project</span>
                                    </span>
                                  </a>
                                  <div class="dropdown-divider bg-info"></div>
                                  <a
                                    href="{{ project.get_absolute_url }}"
                                    class="dropdown-item"
                                  >
                                    <i
                                      class="sl sl-icon-share-alt text-primary"
                                    ></i>
                                    <span>
                                      <span class="dark-text"
                                        >View project</span
                                      >
                                      <span>View details of this project</span>
                                    </span>
                                  </a>
                                  <a
                                    href="#"
                                    class="dropdown-item modal-trigger"
                                    onClick="populateProjectForm('{{ program.slug }}', '{{ project.slug }}');"
                                    data-modal="update-project-modal"
                                  >
                                    <i class="sl sl-icon-note text-success"></i>
                                    <span>
                                      <span class="dark-text"
                                        >Edit project</span
                                      >
                                      <span>Update project details</span>
                                    </span>
                                  </a>
                                  <a
                                    href="#"
                                    class="dropdown-item modal-trigger"
                                    onClick="deleteProjectAction('{{ program.slug }}', '{{ project.slug }}');"
                                    data-modal="delete-project-modal"
                                  >
                                    <i class="sl sl-icon-ban text-danger"></i>
                                    <span>
                                      <span class="dark-text">Delete</span>
                                      <span>Remove this project</span>
                                    </span>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="team-info">
                            {{ project.count_sub_projects }} Sub-projects,
                            {{project.count_beneficiaries }} Beneficiaries
                          </div>
                          <div class="project-members">
                            <div class="face">
                              <img
                                src="https://via.placeholder.com/250x250"
                                alt=""
                                data-demo-src="{% static 'assets/images/avatars/helen.jpg' %}"
                              />
                            </div>
                            <div class="face">
                              <img
                                src="https://via.placeholder.com/250x250"
                                alt=""
                                data-demo-src="{% static 'assets/images/avatars/christina.jpg' %}"
                              />
                            </div>
                          </div>
                        </div>
                      </div>

                      {% endfor %}
                    </div>
                  </div>
                </div>
              </div>

              <!-- Projects + Subproject Wrapper -->
              <div id="my-projects" class="navtab-content">
                <!-- Projects + Subproject content -->
                <div class="projects-list-wrapper">
                  <!-- Projects Group -->
                  <div class="list-header">
                    <div class="list-title">
                      <span
                        >Showing All SubProjects Under {{ program.name|upper }}
                        <h4 class="project-tagline no-margin-bottom">
                          total count: {{ total_sub_projects }}
                        </h4>
                      </span>
                      <div
                        class="add-button modal-trigger"
                        data-modal="create-project-modal"
                      >
                        <i class="material-icons">add</i>
                      </div>
                    </div>
                    <div class="list-filter">
                      <div class="control">
                        <input
                          class="input"
                          type="text"
                          placeholder="Filter Projects"
                        />
                        <div class="form-icon">
                          <i data-feather="filter"></i>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- All SubProject Listing -->
                  <div class="list-body">
                    <div class="columns is-multiline">
                      {% for sub_project in sub_project_list %}
                      <!-- SubProject card -->
                      <div class="column is-4">
                        <div
                          class="flex-card light-bordered light-shadow project-card card-overflow"
                        >
                          <div class="header">
                            <h4 class="no-margin-bottom">
                              {{ sub_project.name|title }}
                            </h4>
                            <!-- Project card dropdown -->
                            <div
                              class="dropdown is-right dropdown-trigger styled-dropdown is-round"
                            >
                              <div class="button">
                                <i class="material-icons">more_vert</i>
                              </div>
                              <div
                                class="dropdown-menu is-text-bigger has-text-left"
                                role="menu"
                              >
                                <div class="dropdown-content">
                                  <a class="dropdown-item">
                                    <i class="sl sl-icon-pencil"></i>
                                    <span>
                                      <span>Edit</span>
                                      <span>Edit this project</span>
                                    </span>
                                  </a>
                                  <a href="#" class="dropdown-item">
                                    <i class="sl sl-icon-notebook"></i>
                                    <span>
                                      <span>Details</span>
                                      <span>View project details</span>
                                    </span>
                                  </a>
                                  <div class="dropdown-divider"></div>
                                  <a href="#" class="dropdown-item">
                                    <i class="sl sl-icon-bell"></i>
                                    <span>
                                      <span>Notifications</span>
                                      <span>Manage notifications</span>
                                    </span>
                                  </a>
                                  <div class="dropdown-divider"></div>
                                  <a class="dropdown-item">
                                    <i class="sl sl-icon-trash"></i>
                                    <span>
                                      <span>Delete</span>
                                      <span>Delete this project</span>
                                    </span>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="project-members">
                            {% if sub_project.image_file %}
                            <div class="face">
                              <img
                                src="https://via.placeholder.com/250x250"
                                alt=""
                                data-demo-src="{{ sub_project.image_file.url }}"
                              />
                            </div>
                            {% endif %}

                            <div class="face is-fake">+5</div>
                          </div>

                          <div class="team-info">
                            total sub project fund disbursment
                          </div>
                          <div class="progress-block">
                            <progress
                              class="progress is-xs is-green"
                              value="{{ sub_project.fund_utilization_percent }}"
                              max="100"
                            >
                              {{ sub_project.fund_utilization_percent }}%
                            </progress>
                            <div class="task-count">
                              <span class="sl sl-icon-check"></span>
                              <span>
                                {{ sub_project.fund_utilization_percent }}%
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>

                      {% endfor %}
                    </div>
                  </div>
                </div>
              </div>

              <!-- Beneficiary List -->
              <div id="my-tasks" class="navtab-content">
                <!-- Beneficiary List -->
                <div class="projects-list-wrapper">
                  <div class="list-header">
                    <div class="list-title">
                      <span>
                        Showing All Beneficiaries Under {{ program.name|upper }}
                      </span>
                      <div
                        class="add-button modal-trigger"
                        data-modal="create-task-modal"
                      >
                        <i class="material-icons">add</i>
                      </div>
                    </div>
                    <div class="list-filter">
                      <div class="control">
                        <input
                          class="input"
                          type="text"
                          placeholder="Filter Projects"
                        />
                        <div class="form-icon">
                          <i data-feather="filter"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="list-body">
                    <div class="columns is-multiline">
                      <div class="column">
                        <!-- Beneficiary List -->
                        <div class="tasks-wrapper">
                          <div class="header">
                            <h4 class="no-margin-bottom">
                              Total Count
                              <small>({{ total_beneficiary_count }})</small>
                            </h4>

                            <!-- Beneficiary List Dropdown-->
                            <div
                              class="dropdown is-right dropdown-trigger styled-dropdown is-round"
                            >
                              <div class="button">
                                <i class="material-icons">more_vert</i>
                              </div>
                              <div
                                class="dropdown-menu is-text-bigger has-text-left"
                                role="menu"
                              >
                                <div class="dropdown-content">
                                  <a class="dropdown-item">
                                    <i class="sl sl-icon-pencil"></i>
                                    <span>
                                      <span>Rename</span>
                                      <span>Rename this task group</span>
                                    </span>
                                  </a>
                                  <a href="#" class="dropdown-item">
                                    <i class="sl sl-icon-grid"></i>
                                    <span>
                                      <span>Archive</span>
                                      <span>Archive this task group</span>
                                    </span>
                                  </a>
                                  <div class="dropdown-divider"></div>
                                  <a href="#" class="dropdown-item">
                                    <i class="sl sl-icon-equalizer"></i>
                                    <span>
                                      <span>Settings</span>
                                      <span>Group settings</span>
                                    </span>
                                  </a>
                                  <div class="dropdown-divider"></div>
                                  <a class="dropdown-item">
                                    <i class="sl sl-icon-plus"></i>
                                    <span>
                                      <span>Add</span>
                                      <span>Add new task</span>
                                    </span>
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>

                          <!-- Beneficiary List Cards-->
                          {% for beneficiary in beneficiary_list %}
                          <div class="task-card">
                            <div class="card-progress" data-progress="83"></div>
                            <div class="card-inner">
                              <div class="task-meta">
                                <span class="task-title">
                                  {{ beneficiary.name|title }}
                                </span>
                                <span class="task-due-date">
                                  type: {{ beneficiary.org_type|lower }} | ward:
                                  {{ beneficiary.ward.name|lower }} | members:
                                  {{ beneficiary.total_beneficiaries }} | email:
                                  {{ beneficiary.email }} | registration date:
                                  {{ beneficiary.registered_date }}
                                </span>
                              </div>
                              <div class="task-info">
                                <div class="task-members">
                                  {% if beneficiary.logo %}
                                  <div class="face">
                                    <img
                                      src="https://via.placeholder.com/250x250"
                                      alt=""
                                      data-demo-src="{{ beneficiary.logo.url }}"
                                    />
                                  </div>
                                  {% endif %}
                                </div>
                                <div class="subtasks-count">
                                  <i class="sl sl-icon-check"></i>
                                  <span>active</span>
                                </div>
                                <div class="more-drop">
                                  <!-- Task dropdown -->
                                  <div
                                    class="dropdown is-right dropdown-trigger styled-dropdown is-round"
                                  >
                                    <div class="button">
                                      <i class="material-icons">more_vert</i>
                                    </div>
                                    <div
                                      class="dropdown-menu is-text-bigger has-text-left"
                                      role="menu"
                                    >
                                      <div class="dropdown-content">
                                        <a href="#" class="dropdown-item">
                                          <i class="sl sl-icon-eye"></i>
                                          <span>
                                            <span>View</span>
                                            <span>View task details</span>
                                          </span>
                                        </a>
                                        <a class="dropdown-item">
                                          <i class="sl sl-icon-pencil"></i>
                                          <span>
                                            <span>Edit</span>
                                            <span>Edit this task</span>
                                          </span>
                                        </a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item">
                                          <i class="sl sl-icon-trash"></i>
                                          <span>
                                            <span>Delete</span>
                                            <span>Delete this task</span>
                                          </span>
                                        </a>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>

                          {% endfor %}
                        </div>
                        <!-- /Task Group -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Invite User Modal -->
<div id="invite-user-modal" class="modal modal-md invite-user-modal modal-hero">
  <div class="modal-background"></div>
  <div class="modal-content">
    <div class="flex-card simple-shadow">
      <h2 class="dark-text">Invite Users</h2>
      <div class="card-body">
        <div class="has-text-centered">
          <div class="image">
            <img src="{% static 'assets/images/icons/invitation.svg' %}" />
          </div>
          <div class="help-text has-text-left">
            Send an invite link via email to add members to this team
          </div>

          <div class="field">
            <div class="control has-icons-left">
              <input
                class="input is-medium"
                type="text"
                placeholder="Recipient email address"
              />
              <span class="icon is-left">
                <i class="fa fa-envelope"></i>
              </span>
            </div>
          </div>

          <div class="add-more">
            <i class="material-icons">add</i>
            <span>Add another</span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="submit" class="button is-modal">Invite Users</button>
      </div>
    </div>
  </div>
  <button class="modal-close is-large is-hidden" aria-label="close"></button>
</div>
<!-- /Invite User Modal --><!-- Create Project Modal -->
<div id="create-project-modal" class="modal create-project-modal modal-hero">
  <div class="modal-background"></div>
  <div class="modal-content">
    <div class="flex-card simple-shadow">
      <h2 class="has-text-centered dark-text">New Project</h2>
      <div class="navigation-tabs layout-tabs animated-tabs">
        <div class="tabs is-toggle is-fullwidth no-margin-bottom">
          <ul>
            <li class="tab-link is-active" data-tab="project-details">
              <a>Details</a>
            </li>
            <li class="tab-link" data-tab="project-members"><a>Members</a></li>
          </ul>
        </div>

        <div id="project-details" class="navtab-content is-active">
          <div class="card-body">
            <div class="content">
              <!-- New Project form -->
              <form>
                <div class="field mb-10">
                  <label class="label dark-text">Project Dates</label>
                  <div class="columns is-vcentered is-fieldset">
                    <div class="column is-3">
                      <div class="field-label">Start date*</div>
                    </div>
                    <div class="column is-9">
                      <div class="control has-icons-right">
                        <input
                          data-toggle="datepicker"
                          type="text"
                          class="input is-medium"
                          placeholder="Start Date"
                        />
                        <span class="icon is-right is-medium">
                          <i class="im im-icon-Calendar-4"></i>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="columns is-fieldset">
                    <div class="column is-3">
                      <div class="field-label">End Date*</div>
                    </div>
                    <div class="column is-9">
                      <div class="control has-icons-right">
                        <input
                          data-toggle="datepicker"
                          type="text"
                          class="input is-medium"
                          placeholder="End Date"
                        />
                        <span class="icon is-right is-medium">
                          <i class="im im-icon-Calendar-4"></i>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="field mb-10">
                  <label class="label dark-text">Project Meta</label>
                  <div class="columns is-vcentered is-fieldset">
                    <div class="column is-3">
                      <div class="field-label">Project Name*</div>
                    </div>
                    <div class="column is-9">
                      <input type="text" class="input is-medium" />
                    </div>
                  </div>
                  <div class="columns is-fieldset">
                    <div class="column is-3">
                      <div class="field-label">Description*</div>
                    </div>
                    <div class="column is-9">
                      <textarea class="textarea" rows="4"></textarea>
                    </div>
                  </div>
                </div>

                <div class="form-footer">
                  <button type="submit" class="button is-modal">
                    Create Project
                  </button>
                </div>
              </form>
              <!-- /New Project form -->
            </div>
          </div>
        </div>

        <div id="project-members" class="navtab-content">
          <div class="project-members">
            <div class="face">
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{% static 'assets/images/avatars/ray.jpg' %}"
              />
            </div>
            <div class="face">
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{% static 'assets/images/avatars/helen.jpg' %}"
              />
            </div>
            <div class="face">
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{% static 'assets/images/avatars/elie.jpg' %}"
              />
            </div>
            <div class="face">
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{% static 'assets/images/avatars/ben.jpg' %}"
              />
            </div>
          </div>

          <div class="modal-filter">
            <div class="control">
              <input
                class="input is-medium is-rounded"
                type="text"
                placeholder="Filter Members"
              />
              <span class="material-icons">filter_list</span>
            </div>
          </div>

          <div class="card-body">
            <div class="members-select">
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/eric.png' %}"
                />
                <span>Eric Daniels</span>
                <div class="b-checkbox is-secondary">
                  <input id="user1" class="styled" type="checkbox" checked />
                  <label for="user1"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/anthony.jpg' %}"
                />
                <span>Anthony Briggs</span>
                <div class="b-checkbox is-secondary">
                  <input id="user2" class="styled" type="checkbox" checked />
                  <label for="user2"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/janet.jpg' %}"
                />
                <span>Jenna De Camp</span>
                <div class="b-checkbox is-secondary">
                  <input id="user3" class="styled" type="checkbox" checked />
                  <label for="user3"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/aaron.jpg' %}"
                />
                <span>Rolf Van Buren</span>
                <div class="b-checkbox is-secondary">
                  <input id="user4" class="styled" type="checkbox" />
                  <label for="user4"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/marge.jpg' %}"
                />
                <span>Magda Hilden</span>
                <div class="b-checkbox is-secondary">
                  <input id="user5" class="styled" type="checkbox" />
                  <label for="user5"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/alex.jpg' %}"
                />
                <span>Alex Sheller</span>
                <div class="b-checkbox is-secondary">
                  <input id="user6" class="styled" type="checkbox" />
                  <label for="user6"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/jane.jpg' %}"
                />
                <span>Katarina Vosniak</span>
                <div class="b-checkbox is-secondary">
                  <input id="user7" class="styled" type="checkbox" />
                  <label for="user7"></label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <button class="modal-close is-large is-hidden" aria-label="close"></button>
</div>
<!-- Reminder Modal --><!-- Create Task Modal -->
<div id="create-task-modal" class="modal create-task-modal modal-hero">
  <div class="modal-background"></div>
  <div class="modal-content">
    <div class="flex-card simple-shadow">
      <h2 class="has-text-centered dark-text">New Task</h2>
      <div class="navigation-tabs layout-tabs animated-tabs">
        <div class="tabs is-toggle is-fullwidth no-margin-bottom">
          <ul>
            <li class="tab-link is-active" data-tab="task-details">
              <a>Details</a>
            </li>
            <li class="tab-link" data-tab="task-members"><a>Members</a></li>
          </ul>
        </div>

        <div id="task-details" class="navtab-content is-active">
          <div class="card-body">
            <div class="content">
              <!-- New Project form -->
              <form>
                <div class="field mb-10">
                  <label class="label dark-text">Due Date</label>
                  <div class="columns is-vcentered is-fieldset">
                    <div class="column is-3">
                      <div class="field-label">Start date*</div>
                    </div>
                    <div class="column is-9">
                      <div class="control has-icons-right">
                        <input
                          data-toggle="datepicker"
                          type="text"
                          class="input is-medium"
                          placeholder="Start Date"
                        />
                        <span class="icon is-right is-medium">
                          <i class="im im-icon-Calendar-4"></i>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="columns is-fieldset">
                    <div class="column is-3">
                      <div class="field-label">End Date*</div>
                    </div>
                    <div class="column is-9">
                      <div class="control has-icons-right">
                        <input
                          data-toggle="datepicker"
                          type="text"
                          class="input is-medium"
                          placeholder="End Date"
                        />
                        <span class="icon is-right is-medium">
                          <i class="im im-icon-Calendar-4"></i>
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="field mb-10">
                  <label class="label dark-text">Task Meta</label>
                  <div class="columns is-vcentered is-fieldset">
                    <div class="column is-3">
                      <div class="field-label">Task Title*</div>
                    </div>
                    <div class="column is-9">
                      <input type="text" class="input is-medium" />
                    </div>
                  </div>
                  <div class="columns is-fieldset">
                    <div class="column is-3">
                      <div class="field-label">Description*</div>
                    </div>
                    <div class="column is-9">
                      <textarea class="textarea" rows="4"></textarea>
                    </div>
                  </div>
                </div>

                <div class="form-footer">
                  <button type="submit" class="button is-modal">
                    Create Task
                  </button>
                </div>
              </form>
              <!-- /New Project form -->
            </div>
          </div>
        </div>

        <div id="task-members" class="navtab-content">
          <div class="task-members">
            <div class="face">
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{% static 'assets/images/avatars/ray.jpg' %}"
              />
            </div>
            <div class="face">
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{% static 'assets/images/avatars/helen.jpg' %}"
              />
            </div>
            <div class="face">
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{% static 'assets/images/avatars/elie.jpg' %}"
              />
            </div>
            <div class="face">
              <img
                src="https://via.placeholder.com/250x250"
                alt=""
                data-demo-src="{% static 'assets/images/avatars/ben.jpg' %}"
              />
            </div>
          </div>

          <div class="modal-filter">
            <div class="control">
              <input
                class="input is-medium is-rounded"
                type="text"
                placeholder="Filter Members"
              />
              <span class="material-icons">filter_list</span>
            </div>
          </div>

          <div class="card-body">
            <div class="members-select">
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/eric.png' %}"
                />
                <span>Eric Daniels</span>
                <div class="b-checkbox is-secondary">
                  <input
                    id="task-user1"
                    class="styled"
                    type="checkbox"
                    checked
                  />
                  <label for="task-user1"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/anthony.jpg' %}"
                />
                <span>Anthony Briggs</span>
                <div class="b-checkbox is-secondary">
                  <input
                    id="task-user2"
                    class="styled"
                    type="checkbox"
                    checked
                  />
                  <label for="task-user2"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/janet.jpg' %}"
                />
                <span>Jenna De Camp</span>
                <div class="b-checkbox is-secondary">
                  <input
                    id="task-user3"
                    class="styled"
                    type="checkbox"
                    checked
                  />
                  <label for="task-user3"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/aaron.jpg' %}"
                />
                <span>Rolf Van Buren</span>
                <div class="b-checkbox is-secondary">
                  <input id="task-user4" class="styled" type="checkbox" />
                  <label for="task-user4"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/marge.jpg' %}"
                />
                <span>Magda Hilden</span>
                <div class="b-checkbox is-secondary">
                  <input id="task-user5" class="styled" type="checkbox" />
                  <label for="task-user5"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/alex.jpg' %}"
                />
                <span>Alex Sheller</span>
                <div class="b-checkbox is-secondary">
                  <input id="task-user6" class="styled" type="checkbox" />
                  <label for="task-user6"></label>
                </div>
              </div>
              <div class="member-row">
                <img
                  src="https://via.placeholder.com/250x250"
                  alt=""
                  data-demo-src="{% static 'assets/images/avatars/jane.jpg' %}"
                />
                <span>Katarina Vosniak</span>
                <div class="b-checkbox is-secondary">
                  <input id="task-user7" class="styled" type="checkbox" />
                  <label for="task-user7"></label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <button class="modal-close is-large is-hidden" aria-label="close"></button>
</div>
<!-- Create task Modal --><!-- Create Team Modal -->
<div id="create-team-modal" class="modal modal-md icon-action-modal modal-hero">
  <div class="modal-background"></div>
  <div class="modal-content">
    <div class="flex-card simple-shadow">
      <h2 class="dark-text">New Team</h2>
      <div class="card-body">
        <div class="has-text-centered">
          <div class="image">
            <img src="{% static 'assets/images/icons/basket.svg' %}" />
          </div>
          <div class="help-text has-text-left">
            Create a New Team to use in your projects
          </div>

          <div class="field">
            <div class="control has-icons-left">
              <input
                class="input is-medium"
                type="text"
                placeholder="Team Name"
              />
              <span class="icon is-left">
                <i class="fa fa-users"></i>
              </span>
            </div>
          </div>

          <div class="columns is-fieldset">
            <div class="column">
              <textarea
                class="textarea"
                rows="3"
                placeholder="What will this team be in charge of ?"
              ></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="button modal-dismiss">Cancel</button>
        <button type="submit" class="button is-modal">Create Team</button>
      </div>
    </div>
  </div>
  <button class="modal-close is-large" aria-label="close"></button>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
<script>
  function populateProjectForm(program_slug, project_slug) {
    console.log(
      `Project form params; |Program=${program_slug}, Project=${project_slug}|`
    );
    let origin = location.origin;
    const updateUrl = `${origin}/program/${program_slug}/project/${project_slug}/update`;

    fetch(updateUrl, {
      headers: {
        "Content-Type": "application/json",
        Accept: "application/json",
      },
    })
      .then((response) => {
        return response.json();
      })
      .then((payload) => {
        let projectData = payload.project;
        console.log(`populating project details for ${projectData.name}`);

        if (projectData.approved == true) {
          $(`#id_approved option[value="${projectData.approved}"]`).prop(
            "selected",
            true
          );
        } else if (projectData.approved == false) {
          $(`#id_approved option[value="${projectData.approved}"]`).val(
            projectData.approved
          );
        } else {
          $(`#id_approved option[value="${projectData.approved}"]`).prop(
            "selected",
            false
          );
        }

        if (projectData.has_funding == true) {
          $(`#id_has_funding option[value="${projectData.has_funding}"]`).prop(
            "selected",
            true
          );
        } else if (projectData.has_funding == false) {
          $(`#id_has_funding option[value="${projectData.has_funding}"]`).val(
            projectData.has_funding
          );
        } else {
          $(`#id_has_funding option[value="${projectData.has_funding}"]`).prop(
            "selected",
            false
          );
        }

        $("#edit-project-form input[name='name']").val(projectData.name);
        $("#edit-project-form textarea[name='description']").val(
          projectData.description
        );
        $("#edit-project-form select[name='program']").val(projectData.program);
        $("#edit-project-form select[name='project_representative']").val(
          projectData.project_representative
        );
        $("#edit-project-form select[name='project_managers']").val(
          projectData.project_managers
        );
        $("#edit-project-form select[name='training_managers']").val(
          projectData.training_managers
        );
        $("#edit-project-form select[name='certification_managers']").val(
          projectData.certification_managers
        );
        $("#edit-project-form textarea[name='custom_precis']").val(
          projectData.precis
        );
        $("#edit-project-form input[name='focus_area']").val(
          projectData.focus_area
        );
        $("#edit-project-form").attr("action", updateUrl);
      })
      .catch(function (err) {
        console.error(err.message);
        console.log(`Error populating project form due to: ${err}`);
      });
  }

  function deleteProjectAction(program_slug, project_slug) {
    let origin = location.origin;
    const url = `${origin}/program/${program_slug}/project/${project_slug}/delete`;
    $("#delete-project-form").attr("action", url);
  }
</script>
{% endblock javascripts %}
