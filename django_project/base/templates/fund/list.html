{% extends "layouts/base.html" %}
<!--  -->
{% load crispy_forms_tags %}
<!--  -->
{% load static %}
<!--  -->
{% block title %} Funds List {% endblock %}
<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}
<!-- PAGE content goes HERE -->
{% block content %}
<!-- Main dashboard container -->
<div id="dashboard-wrapper" class="dashboard-outer">
   <div class="dashboard-inner">
      <!-- Dashboard Wrapper -->
      <div class="dashboard-wrapper">
         <div id="main-dashboard" class="section-wrapper">
            <!-- Dashboard content -->
            <div id="basic-layout" class="dashboard-columns">
               <!-- Page title -->
               <div class="contacts-title-wrapper">
                  <h3 class="contacts-title">Showing {{ project.name }} Project Funds</h3>
                  <!-- Filter input -->
                  <div class="list-filter">
                     <div class="control is-hidden-phones">
                        <input
                           class="input"
                           type="text"
                           placeholder="Filter Contacts"
                           />
                        <div class="form-icon">
                           <i data-feather="filter"></i>
                        </div>
                     </div>
                     <a class="
                        button
                        btn-dash
                        secondary-btn
                        btn-dash
                        raised
                        ripple
                        has-icon
                        modal-trigger
                        "
                        data-ripple-color=""
                        data-modal="create-project-modal"
                        href="#"
                        >
                     <i class="material-icons">add</i>
                     Create New {{ project.name|title }} Fund
                     </a>

                     <a class="
                        button
                        btn-dash
                        secondary-btn
                        btn-dash
                        raised
                        {% comment %} ripple {% endcomment %}
                        has-icon
                        modal-trigger
                        "
                        data-ripple-color=""
                        href="{% url 'tralard:project-detail' program_slug=project.program.slug project_slug=project.slug %}"
                        >
                        <span>Go Back To {{ project.name }} Project </span> 
                     <i class="material-icons">send</i>
                     </a>
                  </div>
               </div>
               <div
                  class="
                  flex-card
                  is-contact-list
                  light-bordered
                  card-overflow
                  is-hidden-mobile
                  "
                  >
                  <!-- Contacts table -->
                  <table class="table contacts-table">
                     <!-- Table header -->
                     <thead>
                        <tr>
                           <th>
                              <div class="b-checkbox is-secondary">
                                 <input
                                    id="checkbox-docs-all"
                                    class="styled"
                                    type="checkbox"
                                    />
                                 <label for="checkbox-docs-all"></label>
                              </div>
                           </th>
                           <th class="w-30">
                              <!-- Filter dropdown -->
                              <div class="dropdown filter-dropdown dropdown-trigger">
                                 <div class="button">
                                    <span>Project</span>
                                    <i class="material-icons">keyboard_arrow_down</i>
                                 </div>
                                 
                              </div>
                           </th>
                           <th>
                              <!-- Filter dropdown -->
                              <div class="dropdown filter-dropdown dropdown-trigger">
                                 <div class="button">
                                    <span>Amount</span>
                                    <i class="material-icons">keyboard_arrow_down</i>
                                 </div>
                                 
                              </div>
                           </th>
                           <th>
                            <!-- Filter dropdown -->
                            <div class="dropdown filter-dropdown dropdown-trigger">
                               <div class="button">
                                  <span>Total Disbursement</span>
                                  <i class="material-icons">keyboard_arrow_down</i>
                               </div>
                               
                            </div>
                         </th>
                         <th>
                            <!-- Filter dropdown -->
                            <div class="dropdown filter-dropdown dropdown-trigger">
                               <div class="button">
                                  <span>Balance</span>
                                  <i class="material-icons">keyboard_arrow_down</i>
                               </div>
                               
                            </div>
                         </th>
                           <th>
                            <!-- Filter dropdown -->
                            <div class="dropdown filter-dropdown dropdown-trigger">
                               <div class="button">
                                  <span>Approved</span>
                                  <i class="material-icons">keyboard_arrow_down</i>
                               </div>
                            </div>
                         </th>
                         <th>
                            <!-- Filter dropdown -->
                            <div class="dropdown filter-dropdown dropdown-trigger">
                               <div class="button">
                                  <span>SubProjects</span>
                                  <i class="material-icons">keyboard_arrow_down</i>
                               </div>
                            </div>
                         </th>
                           <th>
                              <!-- Filter dropdown -->
                              <div class="dropdown filter-dropdown dropdown-trigger">
                                 <div class="button">
                                    <span>Funding Date</span>
                                    <i class="material-icons">keyboard_arrow_down</i>
                                 </div>
                                 
                              </div>
                           </th>
                           <th class="w-5">
                              <!-- Filter dropdown -->
                              <div
                                 class="dropdown filter-dropdown is-right dropdown-trigger"
                                 >
                                 <div class="button">
                                    <span class="material-icons">subject</span>
                                    <i class="material-icons">keyboard_arrow_down</i>
                                 </div>
                                 <div class="dropdown-menu" role="menu">
                                    <div class="dropdown-content">
                                       <div class="dropdown-item filter-title">
                                          View type
                                       </div>
                                       <a href="#" class="dropdown-item is-spaced is-active">
                                       <span><i class="fa fa-check"></i> List view</span>
                                       <i class="material-icons">view_list</i>
                                       </a>
                                       <a class="dropdown-item is-spaced">
                                       <span><i class="fa fa-check"></i> Grid view</span>
                                       <i class="material-icons">view_module</i>
                                       </a>
                                    </div>
                                 </div>
                              </div>
                           </th>
                        </tr>
                     </thead>
                     <!-- Table body -->
                     <tbody>
                        <!-- Table row -->
                        {% for fund in funds %}
                        <tr>
                           <td>
                              <div class="b-checkbox is-secondary">
                                 <input
                                    id="checkbox-contacts-1"
                                    class="styled"
                                    type="checkbox"
                                    />
                                 <label for="checkbox-contacts-1"></label>
                              </div>
                           </td>
                           <td class="contact-preview">
                              <span class="inner">
                                  {% if fund.project.program.logo %}
                              <img
                                 src="https://via.placeholder.com/150x150"
                                 alt=""
                                 data-demo-src="{{ fund.project.program.logo.url }}"
                                 />
                                 {% endif %}
                                 <span class="inner">
                                    <span class="project-count">
                                        {{ fund.project.name }}
                                     </span>
                                 </span>

                              <i class="material-icons">bookmark_border</i>
                              
                              </span>
                              
                           </td>

                           <td class="modifications">
                                <span class="inner">
                                    <span class="project-count">
                {{ fund.project.get_total_project_fund }}
                                     </span>
                                 </span>
                            </td>

                           <td class="modifications">
                               <span class="inner">
                                   <span class="project-count">
                                        {{ fund.disbursment.amount }}
                                    </span>
                                </span>
                            </td>

                            <td class="modifications">
                                <span class="inner">
                                    <span class="project-count">
                                {{ fund.project.get_total_fund_balance }}
                                    </span>
                                </span>
                            </td>

                            <td class="modifications">
                                <span class="inner">
                                    <span class="project-count">
                                        {% if fund.approved %}
                                            Yes 
                                        {% else %}
                                            No
                                        {% endif %}
                                    </span>
                                </span>
                            </td>

                            <td class="modifications">
                                <span class="inner">
                                    <span class="project-count">
                                    {{ fund.project.count_sub_projects }}
                                    </span>
                                </span>
                            </td>

                           <td class="projects">
                              <span class="inner">
                              <span class="project-count">
                                {{ fund.funding_date }}
                              </span>
                              <button type="button" class="button">Update</button>
                              </span>
                           </td>

                           <td class="actions">
                              <div
                                 class="
                                 dropdown
                                 is-right
                                 dropdown-trigger
                                 contacts-list-dropdown
                                 "
                                 >
                                 <div class="button">
                                    <i class="material-icons">more_horiz</i>
                                 </div>
                                 <div class="dropdown-menu is-text-bigger" role="menu">
                                    <div class="dropdown-content">
                                       <a class="dropdown-item">
                                       <i class="sl sl-icon-eye"></i>
                                       <span>
                                       <span>View</span>
                                       <span>View contact details</span>
                                       </span>
                                       </a>
                                       <a href="#" class="dropdown-item">
                                       <i class="sl sl-icon-pencil"></i>
                                       <span>
                                       <span>Edit</span>
                                       <span>Edit contact details</span>
                                       </span>
                                       </a>
                                       <div class="dropdown-divider"></div>
                                       <a href="#" class="dropdown-item">
                                       <i class="sl sl-icon-bell"></i>
                                       <span>
                                       <span>Notifications</span>
                                       <span>Manage contact notifications</span>
                                       </span>
                                       </a>
                                       <div class="dropdown-divider"></div>
                                       <a class="dropdown-item">
                                       <i class="sl sl-icon-trash"></i>
                                       <span>
                                       <span>Delete</span>
                                       <span>Delete this contact</span>
                                       </span>
                                       </a>
                                    </div>
                                 </div>
                              </div>
                              <a href="#" class="button is-hidden"
                                 ><i class="material-icons">remove_red_eye</i></a
                                 >
                           </td>
                        </tr>
                        {% endfor %}
                     </tbody>
                  </table>
               </div>
               <!--Placeholder-->
               {% comment %} <div class="flex-card is-not-supported light-bordered">
                  <img
                     src="{% static 'assets/images/illustrations/not-mobile.svg' %}"
                     alt=""
                     />
                  <div class="has-text-centered">
                     <h3>Ouch...</h3>
                     <p>
                        Sorry, the contacts list is not supported on mobile. Please try
                        a device with a wider screen.
                     </p>
                  </div>
               </div> {% endcomment %}
            </div>
         </div>
      </div>
   </div>
</div>
<!-- Create contact modal -->
<!-- Create contact Modal -->
<!-- Create Project Modal -->
<div id="create-project-modal" class="modal create-project-modal modal-hero">
   <div class="modal-background"></div>
   <div class="modal-content">
      <div class="flex-card simple-shadow">
         <h2 class="has-text-centered dark-text">
             Add {{ project.name|title }} Fund</h2>
         <div class="navigation-tabs layout-tabs animated-tabs">
            <div class="tabs is-toggle is-fullwidth no-margin-bottom">
               
            </div>
            <div id="project-details" class="navtab-content is-active">
               <div class="card-body">
                  <div class="content">
                     <!-- New Project Fund form -->
                     <form action="/fund/list/" method="post">
                        {% csrf_token %}
                        <!--  -->
                        {% crispy form form.helper %}
                     </form>
                     <!-- /New Project Fund form -->
                  </div>
               </div>
            </div>
            
            
         </div>
      </div>
   </div>
   <button class="modal-close is-large is-hidden" aria-label="close"></button>
</div>
<!-- /Invite User Modal -->
{% endblock content %}
<!-- Specific Page JS goes HERE  -->
{% block javascripts %}{% endblock javascripts %}